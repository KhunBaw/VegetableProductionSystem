(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-50c80ee5"],{"0f93":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("b-container",{attrs:{fluid:""}},[a("b-row",{attrs:{"align-h":"between"}},[a("b-col",{staticClass:"my-1",attrs:{sm:"9",md:"6",lg:"5",xl:"4"}},[a("b-form-group",{staticClass:"mb-2",attrs:{label:"ค้นหา","label-for":"filter-input","label-cols-sm":"3","label-align-sm":"right","label-size":"sm"}},[a("b-input-group",{attrs:{size:"sm"}},[a("b-form-input",{attrs:{id:"filter-input",type:"search",placeholder:"พิมพ์เพื่อค้นหา"},model:{value:e.filter,callback:function(t){e.filter=t},expression:"filter"}}),a("b-input-group-append",[a("b-button",{attrs:{disabled:!e.filter},on:{click:function(t){e.filter=""}}},[e._v("ล้างการค้นหา")])],1)],1)],1)],1),a("b-col",{staticClass:"my-1 text-right",attrs:{sm:"7",md:"5",lg:"4",xl:"4"}},[a("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.AddVegetable",modifiers:{AddVegetable:!0}}],staticClass:"btn btn-success btn-sm",staticStyle:{height:"35px",width:"140px"}},[e._v(" เพิ่ม ")])],1)],1),a("b-table",{staticClass:"table table-bordered",attrs:{"primary-key":"v_id",items:e.items,fields:e.fields,"current-page":e.currentPage,"per-page":e.perPage,filter:e.filter,"filter-included-fields":e.filterOn,busy:e.isBusy,stacked:"sm","empty-text":"ไม่มีข้อมูล","empty-filtered-text":"ไม่มีข้อมูล","show-empty":""},scopedSlots:e._u([{key:"table-busy",fn:function(){return[a("div",{staticClass:"text-center text-danger my-2"},[a("b-spinner",{staticClass:"align-middle"}),a("strong",[e._v(" กำลังโหลด...")])],1)]},proxy:!0},{key:"cell(v_id)",fn:function(t){return[e._v(" "+e._s(t.item.id))]}},{key:"cell(distance)",fn:function(t){return[e._v(" "+e._s(t.item.v_wide)+" x "+e._s(t.item.v_long))]}},{key:"cell(v_nfv)",fn:function(t){return[e._v(" "+e._s(t.value)+" กรัม ")]}},{key:"cell(v_d1)",fn:function(t){return[e._v(" "+e._s(t.value)+" วัน ")]}},{key:"cell(v_d2)",fn:function(t){return[e._v(" "+e._s(t.value)+" วัน ")]}},{key:"cell(v_d3)",fn:function(t){return[e._v(" "+e._s(t.value)+" วัน ")]}},{key:"cell(v_photo)",fn:function(e){return[a("img",{staticStyle:{width:"auto",height:"100px"},attrs:{src:e.value}})]}},{key:"cell(actions)",fn:function(t){return[a("b-button",{staticClass:"btn btn-info btn-sm ml-1 mt-1 actions",staticStyle:{height:"35px"},on:{click:t.toggleDetails}},[a("i",{staticClass:"material-icons"},[e._v(" grass ")])]),a("b-button",{directives:[{name:"b-popover",rawName:"v-b-popover.hover.top",value:"แก้ไข : "+t.item.v_name,expression:"'แก้ไข : ' + row.item.v_name",modifiers:{hover:!0,top:!0}}],staticClass:"btn btn-warning btn-sm ml-1 mt-1 actions",staticStyle:{height:"35px"},attrs:{disabled:t.item.status},on:{click:function(a){return e.Edit(t.item,t.item.v_name,a.target)}}},[a("i",{staticClass:"material-icons"},[e._v(" edit ")])]),a("b-button",{directives:[{name:"b-popover",rawName:"v-b-popover.hover.top",value:"ลบ : "+t.item.v_name,expression:"'ลบ : ' + row.item.v_name",modifiers:{hover:!0,top:!0}}],staticClass:"btn btn-danger btn-sm ml-1 mt-1 actions",staticStyle:{height:"35px"},attrs:{disabled:t.item.status},on:{click:function(a){return e.Delete(t.item.v_id,t.item.v_name)}}},[a("i",{staticClass:"material-icons"},[e._v(" delete_forever ")])])]}},{key:"row-details",fn:function(t){return[a("b-card",{staticStyle:{"background-color":"#eee"}},[a("Fertilizer",{attrs:{items:t.item.v_fertilizer,v_id:t.item.v_id,Vegetable:e.Vegetable}})],1)]}}])}),a("b-row",{attrs:{"align-h":"between"}},[a("b-col",{staticClass:"my-1",attrs:{sm:"6",md:"6",lg:"5",xl:"4"}},[a("b-form-group",{staticClass:"mb-0",attrs:{label:"แสดงหน้าละ","label-for":"per-page-select","label-cols-sm":"6","label-cols-md":"4","label-cols-lg":"3","label-align-sm":"right","label-size":"sm"}},[a("b-form-select",{attrs:{id:"per-page-select",options:e.pageOptions,size:"sm"},model:{value:e.perPage,callback:function(t){e.perPage=t},expression:"perPage"}})],1)],1),a("b-col",{staticClass:"my-1",attrs:{sm:"6",md:"6"}},[a("b-pagination",{staticClass:"my-0",attrs:{"total-rows":e.totalRows,"per-page":e.perPage,align:"fill",size:"sm"},model:{value:e.currentPage,callback:function(t){e.currentPage=t},expression:"currentPage"}})],1)],1),a("Edit",{attrs:{editModal:e.editModal,Vegetable:e.Vegetable}}),a("Add",{attrs:{Vegetable:e.Vegetable}})],1)],1)},r=[],n=a("1da1"),s=(a("96cf"),a("bc3a")),l=a.n(s),o=a("1940"),u=a.n(o),c=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"Edit"}},[a("b-modal",{attrs:{id:e.editModal.id,title:e.editModal.title,"ok-title":"ตกลง","cancel-title":"ยกเลิก",size:"lg"},on:{ok:e.handleOk,cancel:e.Vegetable}},[a("form",{staticClass:"needs-validation form-group"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col mb-3"},[a("div",{staticClass:"input-group"},[a("span",{staticClass:"input-group-text"},[e._v("ชื่อผัก:")]),a("input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"},{name:"model",rawName:"v-model",value:e.editModal.content.v_name,expression:"editModal.content.v_name"}],staticClass:"form-control",class:{input:!0,"is-invalid":e.errors.has("v_name")},attrs:{type:"text","aria-label":"v_name",name:"v_name"},domProps:{value:e.editModal.content.v_name},on:{input:function(t){t.target.composing||e.$set(e.editModal.content,"v_name",t.target.value)}}}),a("span",{staticClass:"invalid-feedback"},[e._v(e._s(e.errors.first("v_name")))])])])]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-6 mb-3"},[a("div",{staticClass:"input-group"},[a("span",{staticClass:"input-group-text"},[e._v("ระยะปลูก(กว้าง):")]),a("input",{directives:[{name:"model",rawName:"v-model.number",value:e.editModal.content.v_wide,expression:"editModal.content.v_wide",modifiers:{number:!0}},{name:"validate",rawName:"v-validate",value:"required|min_value:1|integer",expression:"'required|min_value:1|integer'"}],staticClass:"form-control",class:{input:!0,"is-invalid":e.errors.has("v_wide")},attrs:{type:"number","aria-label":"v_wide",name:"v_wide",min:"1"},domProps:{value:e.editModal.content.v_wide},on:{input:function(t){t.target.composing||e.$set(e.editModal.content,"v_wide",e._n(t.target.value))},blur:function(t){return e.$forceUpdate()}}}),a("span",{staticClass:"input-group-text"},[e._v("ซม.")]),a("span",{staticClass:"invalid-feedback"},[e._v(e._s(e.errors.first("v_wide")))])])]),a("div",{staticClass:"col-6 mb-3"},[a("div",{staticClass:"input-group"},[a("span",{staticClass:"input-group-text"},[e._v("ระยะปลูก(ยาว):")]),a("input",{directives:[{name:"model",rawName:"v-model.number",value:e.editModal.content.v_long,expression:"editModal.content.v_long",modifiers:{number:!0}},{name:"validate",rawName:"v-validate",value:"required|min_value:1|integer",expression:"'required|min_value:1|integer'"}],staticClass:"form-control",class:{input:!0,"is-invalid":e.errors.has("v_long")},attrs:{type:"number","aria-label":"v_long",name:"v_long",min:"1"},domProps:{value:e.editModal.content.v_long},on:{input:function(t){t.target.composing||e.$set(e.editModal.content,"v_long",e._n(t.target.value))},blur:function(t){return e.$forceUpdate()}}}),a("span",{staticClass:"input-group-text"},[e._v("ซม.")]),a("span",{staticClass:"invalid-feedback"},[e._v(e._s(e.errors.first("v_long")))])])])]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-6 mb-3"},[a("div",{staticClass:"input-group"},[a("span",{staticClass:"input-group-text"},[e._v("น้ำหนัก/ต้น:")]),a("input",{directives:[{name:"model",rawName:"v-model.number",value:e.editModal.content.v_nfv,expression:"editModal.content.v_nfv",modifiers:{number:!0}},{name:"validate",rawName:"v-validate",value:"required|min_value:1|integer",expression:"'required|min_value:1|integer'"}],staticClass:"form-control",class:{input:!0,"is-invalid":e.errors.has("v_nfv")},attrs:{type:"number","aria-label":"v_nfv",name:"v_nfv",min:"1"},domProps:{value:e.editModal.content.v_nfv},on:{input:function(t){t.target.composing||e.$set(e.editModal.content,"v_nfv",e._n(t.target.value))},blur:function(t){return e.$forceUpdate()}}}),a("span",{staticClass:"input-group-text"},[e._v("กรัม")]),a("span",{staticClass:"invalid-feedback"},[e._v(e._s(e.errors.first("v_nfv")))])])]),a("div",{staticClass:"col-6 mb-3"},[a("div",{staticClass:"input-group"},[a("span",{staticClass:"input-group-text"},[e._v("จำนวนวันที่เพาะ:")]),a("input",{directives:[{name:"model",rawName:"v-model.number",value:e.editModal.content.v_d1,expression:"editModal.content.v_d1",modifiers:{number:!0}},{name:"validate",rawName:"v-validate",value:"required|min_value:1|integer",expression:"'required|min_value:1|integer'"}],staticClass:"form-control",class:{input:!0,"is-invalid":e.errors.has("v_d1")},attrs:{type:"number","aria-label":"v_d1",name:"v_d1",min:"1"},domProps:{value:e.editModal.content.v_d1},on:{input:function(t){t.target.composing||e.$set(e.editModal.content,"v_d1",e._n(t.target.value))},blur:function(t){return e.$forceUpdate()}}}),a("span",{staticClass:"input-group-text"},[e._v("วัน")]),a("span",{staticClass:"invalid-feedback"},[e._v(e._s(e.errors.first("v_d1")))])])])]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-6 mb-3"},[a("div",{staticClass:"input-group"},[a("span",{staticClass:"input-group-text"},[e._v("จำนวนวันที่ปลูก:")]),a("input",{directives:[{name:"model",rawName:"v-model.number",value:e.editModal.content.v_d2,expression:"editModal.content.v_d2",modifiers:{number:!0}},{name:"validate",rawName:"v-validate",value:"required|min_value:1|integer",expression:"'required|min_value:1|integer'"}],staticClass:"form-control",class:{input:!0,"is-invalid":e.errors.has("v_d2")},attrs:{type:"number","aria-label":"v_d2",name:"v_d2",min:"1"},domProps:{value:e.editModal.content.v_d2},on:{input:function(t){t.target.composing||e.$set(e.editModal.content,"v_d2",e._n(t.target.value))},blur:function(t){return e.$forceUpdate()}}}),a("span",{staticClass:"input-group-text"},[e._v("วัน")]),a("span",{staticClass:"invalid-feedback"},[e._v(e._s(e.errors.first("v_d2")))])])]),a("div",{staticClass:"col-6 mb-3"},[a("div",{staticClass:"input-group"},[a("span",{staticClass:"input-group-text"},[e._v("จำนวนวันที่เก็บ:")]),a("input",{directives:[{name:"model",rawName:"v-model.number",value:e.editModal.content.v_d3,expression:"editModal.content.v_d3",modifiers:{number:!0}},{name:"validate",rawName:"v-validate",value:"required|min_value:1|integer",expression:"'required|min_value:1|integer'"}],staticClass:"form-control",class:{input:!0,"is-invalid":e.errors.has("v_d3")},attrs:{type:"number","aria-label":"v_d3",name:"v_d3",min:"1"},domProps:{value:e.editModal.content.v_d3},on:{input:function(t){t.target.composing||e.$set(e.editModal.content,"v_d3",e._n(t.target.value))},blur:function(t){return e.$forceUpdate()}}}),a("span",{staticClass:"input-group-text"},[e._v("วัน")]),a("span",{staticClass:"invalid-feedback"},[e._v(e._s(e.errors.first("v_d3")))])])])]),a("div",{staticClass:"row"},[a("div",{staticClass:"col mb-3"},[a("div",{staticClass:"input-group mb-3"},[a("div",{staticClass:"input-group-prepend"},[a("span",{staticClass:"input-group-text",attrs:{id:"inputGroupFileAddon01"}},[e._v("อัพโหลดภาพ")])]),a("div",{staticClass:"custom-file"},[a("input",{ref:"file",staticClass:"custom-file-input",attrs:{type:"file",id:"inputGroupFile01","aria-describedby":"inputGroupFileAddon01"},on:{change:function(t){return e.handleFileUpload()}}}),a("label",{staticClass:"custom-file-label",attrs:{for:"inputGroupFile01"}},[e._v(e._s(""==e.editModal.content.v_photo?"เลือกไฟล์":e.editModal.content.v_photo))])])])])]),a("div",{staticClass:"row"},[a("div",{staticClass:"col"},[a("div",{staticClass:"text-center",attrs:{id:"preview"}},[(null===e.url?e.editModal.content.v_photo:e.url)?a("img",{staticStyle:{"max-width":"50%",height:"auto"},attrs:{src:null===e.url?e.editModal.content.v_photo:e.url}}):e._e()])])])])])],1)},d=[],m=(a("2b3d"),a("d3b7"),a("3ca3"),a("ddb0"),{components:{},props:{editModal:Object,Vegetable:Function},data:function(){return{file:"",url:null}},methods:{handleOk:function(e){e.preventDefault(),this.SaveVegetable()},handleFileUpload:function(){this.file=this.$refs.file.files[0],this.url=URL.createObjectURL(this.file)},SaveVegetable:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.$validator.validateAll().then(function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(a){var i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!a){t.next=10;break}return i=localStorage.getItem("accessToken"),t.next=4,i;case 4:if(!t.sent){t.next=8;break}try{u()({title:"คุณแน่ใจหรือไม่?",text:"คุณแน่ใจหรือไม่ที่จะอัพเดท?",icon:"warning",buttons:["ยกเลิก","ตกลง"],dangerMode:!0}).then(function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(a){var r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!a){t.next=15;break}if(e.$bvModal.hide(e.editModal.id),r=new FormData,r.append("file",e.file),null==e.url){t.next=11;break}return t.next=7,l.a.post(e.$apiUrl+"upload",r,{headers:{Authorization:"bearer ".concat(i),"Content-Type":"multipart/form-data"}}).catch((function(){return u()("ผิดพลาด","อัพรูปไม่สำเร็จ",{icon:"error",button:"ตกลง"})}));case 7:n=t.sent,e.Save(n.data),t.next=12;break;case 11:e.Save(e.editModal.content.v_photo);case 12:e.Vegetable(),t.next=16;break;case 15:u()("ยกเลิกแล้ว!",{icon:"success",button:"ตกลง"});case 16:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}catch(r){e.$router.push("/"),localStorage.removeItem("username")}t.next=9;break;case 8:e.$router.push("/");case 9:return t.abrupt("return");case 10:u()("ผิดพลาด","กรุณากรอกข้อมูลให้ถูกต้อง!",{icon:"error",button:"ตกลง"});case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 1:case"end":return t.stop()}}),t)})))()},Save:function(e){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function a(){var i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return t.editModal.content.v_photo=e,i=localStorage.getItem("accessToken"),a.next=4,i;case 4:if(!a.sent){a.next=7;break}return a.next=7,l.a.put(t.$apiUrl+"vegetable/"+t.editModal.content.v_id,t.editModal.content,{headers:{Authorization:"bearer ".concat(i)}}).then((function(){return u()("อัพเดทเสร็จสิ้น!",{icon:"success",button:"ตกลง"})})).catch((function(){return u()("ผิดพลาด",{icon:"error",button:"ตกลง"})}));case 7:case"end":return a.stop()}}),a)})))()}}}),v=m,p=a("2877"),f=Object(p["a"])(v,c,d,!1,null,null,null),_=f.exports,b=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"Add"}},[a("b-modal",{attrs:{id:"AddVegetable",title:"เพิ่มข้อมูลผัก","ok-title":"ตกลง","cancel-title":"ยกเลิก",size:"lg"},on:{ok:e.handleOk,show:e.resetData}},[a("form",{staticClass:"form-group needs-validation"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col mb-3",staticStyle:{"min-width":"300px"}},[a("div",{staticClass:"input-group"},[a("span",{staticClass:"input-group-text"},[e._v("ชื่อผัก:")]),a("input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"},{name:"model",rawName:"v-model",value:e.data.v_name,expression:"data.v_name"}],staticClass:"form-control",class:{input:!0,"is-invalid":e.errors.has("v_name")},attrs:{type:"text","aria-label":"v_name",name:"v_name"},domProps:{value:e.data.v_name},on:{input:function(t){t.target.composing||e.$set(e.data,"v_name",t.target.value)}}}),a("span",{staticClass:"invalid-feedback"},[e._v(e._s(e.errors.first("v_name")))])])])]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-6 mb-3"},[a("div",{staticClass:"input-group"},[a("span",{staticClass:"input-group-text"},[e._v("ระยะปลูก(กว้าง):")]),a("input",{directives:[{name:"model",rawName:"v-model.number",value:e.data.v_wide,expression:"data.v_wide",modifiers:{number:!0}},{name:"validate",rawName:"v-validate",value:"required|min_value:1|integer",expression:"'required|min_value:1|integer'"}],staticClass:"form-control",class:{input:!0,"is-invalid":e.errors.has("v_wide")},attrs:{type:"number","aria-label":"v_wide",name:"v_wide",min:"1"},domProps:{value:e.data.v_wide},on:{input:function(t){t.target.composing||e.$set(e.data,"v_wide",e._n(t.target.value))},blur:function(t){return e.$forceUpdate()}}}),a("span",{staticClass:"input-group-text"},[e._v("ซม.")]),a("span",{staticClass:"invalid-feedback"},[e._v(e._s(e.errors.first("v_wide")))])])]),a("div",{staticClass:"col-6 mb-3"},[a("div",{staticClass:"input-group"},[a("span",{staticClass:"input-group-text"},[e._v("ระยะปลูก(ยาว):")]),a("input",{directives:[{name:"model",rawName:"v-model.number",value:e.data.v_long,expression:"data.v_long",modifiers:{number:!0}},{name:"validate",rawName:"v-validate",value:"required|min_value:1|integer",expression:"'required|min_value:1|integer'"}],staticClass:"form-control",class:{input:!0,"is-invalid":e.errors.has("v_long")},attrs:{type:"number","aria-label":"v_long",name:"v_long",min:"1"},domProps:{value:e.data.v_long},on:{input:function(t){t.target.composing||e.$set(e.data,"v_long",e._n(t.target.value))},blur:function(t){return e.$forceUpdate()}}}),a("span",{staticClass:"input-group-text"},[e._v("ซม.")]),a("span",{staticClass:"invalid-feedback"},[e._v(e._s(e.errors.first("v_long")))])])])]),a("div",{staticClass:"row"},[a("div",{staticClass:"col mb-3"},[a("div",{staticClass:"input-group"},[a("span",{staticClass:"input-group-text"},[e._v("น้ำหนัก/ต้น:")]),a("input",{directives:[{name:"model",rawName:"v-model.number",value:e.data.v_nfv,expression:"data.v_nfv",modifiers:{number:!0}},{name:"validate",rawName:"v-validate",value:"required|min_value:1|integer",expression:"'required|min_value:1|integer'"}],staticClass:"form-control",class:{input:!0,"is-invalid":e.errors.has("v_nfv")},attrs:{type:"number","aria-label":"v_nfv",name:"v_nfv",min:"1"},domProps:{value:e.data.v_nfv},on:{input:function(t){t.target.composing||e.$set(e.data,"v_nfv",e._n(t.target.value))},blur:function(t){return e.$forceUpdate()}}}),a("span",{staticClass:"input-group-text"},[e._v("กรัม")]),a("span",{staticClass:"invalid-feedback"},[e._v(e._s(e.errors.first("v_nfv")))])])]),a("div",{staticClass:"col mb-3",staticStyle:{"min-width":"300px"}},[a("div",{staticClass:"input-group"},[a("span",{staticClass:"input-group-text"},[e._v("จำนวนวันที่เพาะ:")]),a("input",{directives:[{name:"model",rawName:"v-model.number",value:e.data.v_d1,expression:"data.v_d1",modifiers:{number:!0}},{name:"validate",rawName:"v-validate",value:"required|min_value:1|integer",expression:"'required|min_value:1|integer'"}],staticClass:"form-control",class:{input:!0,"is-invalid":e.errors.has("v_d1")},attrs:{type:"number","aria-label":"v_d1",name:"v_d1",min:"1"},domProps:{value:e.data.v_d1},on:{input:function(t){t.target.composing||e.$set(e.data,"v_d1",e._n(t.target.value))},blur:function(t){return e.$forceUpdate()}}}),a("span",{staticClass:"input-group-text"},[e._v("วัน")]),a("span",{staticClass:"invalid-feedback"},[e._v(e._s(e.errors.first("v_d1")))])])])]),a("div",{staticClass:"row"},[a("div",{staticClass:"col mb-3",staticStyle:{"min-width":"300px"}},[a("div",{staticClass:"input-group"},[a("span",{staticClass:"input-group-text"},[e._v("จำนวนวันที่ปลูก:")]),a("input",{directives:[{name:"model",rawName:"v-model.number",value:e.data.v_d2,expression:"data.v_d2",modifiers:{number:!0}},{name:"validate",rawName:"v-validate",value:"required|min_value:1|integer",expression:"'required|min_value:1|integer'"}],staticClass:"form-control",class:{input:!0,"is-invalid":e.errors.has("v_d2")},attrs:{type:"number","aria-label":"v_d2",name:"v_d2",min:"1"},domProps:{value:e.data.v_d2},on:{input:function(t){t.target.composing||e.$set(e.data,"v_d2",e._n(t.target.value))},blur:function(t){return e.$forceUpdate()}}}),a("span",{staticClass:"input-group-text"},[e._v("วัน")]),a("span",{staticClass:"invalid-feedback"},[e._v(e._s(e.errors.first("v_d2")))])])]),a("div",{staticClass:"col mb-3",staticStyle:{"min-width":"300px"}},[a("div",{staticClass:"input-group"},[a("span",{staticClass:"input-group-text"},[e._v("จำนวนวันที่เก็บ:")]),a("input",{directives:[{name:"model",rawName:"v-model.number",value:e.data.v_d3,expression:"data.v_d3",modifiers:{number:!0}},{name:"validate",rawName:"v-validate",value:"required|min_value:1|integer",expression:"'required|min_value:1|integer'"}],staticClass:"form-control",class:{input:!0,"is-invalid":e.errors.has("v_d3")},attrs:{type:"number","aria-label":"v_d3",name:"v_d3",min:"1"},domProps:{value:e.data.v_d3},on:{input:function(t){t.target.composing||e.$set(e.data,"v_d3",e._n(t.target.value))},blur:function(t){return e.$forceUpdate()}}}),a("span",{staticClass:"input-group-text"},[e._v("วัน")]),a("span",{staticClass:"invalid-feedback"},[e._v(e._s(e.errors.first("v_d3")))])])])]),a("div",{staticClass:"row"},[a("div",{staticClass:"col mb-3"},[a("div",{staticClass:"input-group mb-3"},[a("div",{staticClass:"input-group-prepend"},[a("span",{staticClass:"input-group-text",attrs:{id:"inputGroupFileAddon01"}},[e._v("อัพโหลดภาพ")])]),a("div",{staticClass:"custom-file"},[a("input",{ref:"file",staticClass:"custom-file-input",attrs:{type:"file",id:"inputGroupFile01","aria-describedby":"inputGroupFileAddon01"},on:{change:function(t){return e.handleFileUpload()}}}),a("label",{staticClass:"custom-file-label",attrs:{for:"inputGroupFile01"}},[e._v(e._s(""==e.file?"เลือกไฟล์":e.file.name))])])])])]),a("div",{staticClass:"row"},[a("div",{staticClass:"col"},[a("div",{staticClass:"text-center",attrs:{id:"preview"}},[e.url?a("img",{staticStyle:{"max-width":"50%",height:"auto"},attrs:{src:e.url}}):e._e()])])])])])],1)},g=[],h={components:{},props:{Vegetable:Function},data:function(){return{file:"",url:null,data:{}}},mounted:function(){return Object(n["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},methods:{handleOk:function(e){e.preventDefault(),this.SaveVegetable()},handleFileUpload:function(){this.file=this.$refs.file.files[0],this.url=URL.createObjectURL(this.file)},resetData:function(){this.file="",this.url=null,this.data={v_name:"",v_wide:1,v_long:1,v_nfv:1,v_d1:1,v_d2:1,v_d3:1,v_photo:""}},SaveVegetable:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.$validator.validateAll().then(function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(a){var i,r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!a){t.next=28;break}return i=localStorage.getItem("accessToken"),t.next=4,i;case 4:if(!t.sent){t.next=26;break}if(t.prev=5,e.$bvModal.hide("AddVegetable"),r=new FormData,r.append("file",e.file),null==e.url){t.next=16;break}return t.next=12,l.a.post(e.$apiUrl+"upload",r,{headers:{Authorization:"bearer ".concat(i),"Content-Type":"multipart/form-data"}}).catch((function(){return u()("ผิดพลาด","อัพรูปไม่สำเร็จ",{icon:"error",button:"ตกลง"})}));case 12:n=t.sent,e.Save(n.data),t.next=17;break;case 16:e.Save("https://firebasestorage.googleapis.com/v0/b/project-end-e92b5.appspot.com/o/no-image.png?alt=media&token=dcc723f4-2f63-4b64-8b23-d22cd6f9b45c");case 17:e.Vegetable(),t.next=24;break;case 20:t.prev=20,t.t0=t["catch"](5),e.$router.push("/"),localStorage.removeItem("username");case 24:t.next=27;break;case 26:e.$router.push("/");case 27:return t.abrupt("return");case 28:u()("ผิดพลาด","กรุณากรอกข้อมูลให้ถูกต้อง!",{icon:"error",button:"ตกลง"});case 29:case"end":return t.stop()}}),t,null,[[5,20]])})));return function(e){return t.apply(this,arguments)}}());case 1:case"end":return t.stop()}}),t)})))()},Save:function(e){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function a(){var i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return t.data.v_photo=e,i=localStorage.getItem("accessToken"),a.next=4,i;case 4:if(!a.sent){a.next=7;break}return a.next=7,l.a.post(t.$apiUrl+"addvegetable",t.data,{headers:{Authorization:"bearer ".concat(i)}}).then((function(){return u()("อัพเดทเสร็จสิ้น!",{icon:"success",button:"ตกลง"})})).catch((function(){return u()("ผิดพลาด",{icon:"error",button:"ตกลง"})}));case 7:case"end":return a.stop()}}),a)})))()}}},x=h,C=(a("591c"),Object(p["a"])(x,b,g,!1,null,null,null)),w=C.exports,y=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("b-container",{attrs:{fluid:""}},[a("b-row",{attrs:{"align-h":"between"}},[a("b-col",{staticClass:"my-1",attrs:{sm:"9",md:"6",lg:"5",xl:"4"}},[a("b-form-group",{staticClass:"mb-2",attrs:{label:"ค้นหา","label-for":"filter-input","label-cols-sm":"3","label-align-sm":"right","label-size":"sm"}},[a("b-input-group",{attrs:{size:"sm"}},[a("b-form-input",{attrs:{id:"filter-input",type:"search",placeholder:"พิมพ์เพื่อค้นหา"},model:{value:e.filter,callback:function(t){e.filter=t},expression:"filter"}}),a("b-input-group-append",[a("b-button",{attrs:{disabled:!e.filter},on:{click:function(t){e.filter=""}}},[e._v("ล้างการค้นหา")])],1)],1)],1)],1),a("b-col",{staticClass:"my-1 text-right",attrs:{sm:"7",md:"5",lg:"4",xl:"4"}},[a("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.AddFertilizer",modifiers:{AddFertilizer:!0}}],staticClass:"btn btn-success btn-sm",staticStyle:{height:"35px",width:"140px"}},[e._v(" เพิ่ม ")])],1)],1),a("b-table",{staticClass:"table table-bordered",attrs:{items:e.items,fields:e.fields,"current-page":e.currentPage,"per-page":e.perPage,filter:e.filter,"filter-included-fields":e.filterOn,busy:e.isBusy,stacked:"sm","empty-text":"ไม่มีข้อมูล","empty-filtered-text":"ไม่มีข้อมูล","show-empty":""},scopedSlots:e._u([{key:"table-busy",fn:function(){return[a("div",{staticClass:"text-center text-danger my-2"},[a("b-spinner",{staticClass:"align-middle"}),a("strong",[e._v(" กำลังโหลด...")])],1)]},proxy:!0},{key:"cell(fertilizer_id)",fn:function(t){return[e._v(" "+e._s(t.item.id)+" ")]}},{key:"cell(fertilizer_type)",fn:function(t){return[e._v(" "+e._s(""!=t.value?t.value:t.item.fertilizer.fertilizer_type))]}},{key:"cell(fertilizer_at)",fn:function(t){return e._l(t.value,(function(t){return a("span",{key:t.time},[e._v(e._s(t.time)+" น. จำนวน "+e._s(t.fertilizer_amount)+" "+e._s(t.unit.unit_th)),a("br")])}))}},{key:"cell(day_times)",fn:function(t){return[e._v(" "+e._s(0!=t.value?t.value:t.item.fertilizer.day_times)+" วัน")]}},{key:"cell(num_first)",fn:function(t){return[e._v(" "+e._s(0!=t.value?t.value:t.item.fertilizer.num_first)+" วัน")]}},{key:"cell(num_pick)",fn:function(t){return[e._v(" "+e._s(0!=t.value?t.value:t.item.fertilizer.num_pick)+" วัน")]}},{key:"cell(actions)",fn:function(t){return[a("b-button",{directives:[{name:"b-popover",rawName:"v-b-popover.hover.top",value:"แก้ไขพื้นที่ : ",expression:"'แก้ไขพื้นที่ : '",modifiers:{hover:!0,top:!0}}],staticClass:"btn btn-warning btn-sm ml-1 mt-1 actions",staticStyle:{height:"35px"},on:{click:function(a){return e.Edit(t.index,a.target,t.item)}}},[a("i",{staticClass:"material-icons"},[e._v(" edit ")])]),a("b-button",{directives:[{name:"b-popover",rawName:"v-b-popover.hover.top",value:"ลบพื้นที่ : ",expression:"'ลบพื้นที่ : '",modifiers:{hover:!0,top:!0}}],staticClass:"btn btn-danger btn-sm ml-1 mt-1 actions",staticStyle:{height:"35px"},on:{click:function(a){return e.Delete(t.index)}}},[a("i",{staticClass:"material-icons"},[e._v(" delete_forever ")])])]}}])}),a("b-row",{attrs:{"align-h":"between"}},[a("b-col",{staticClass:"my-1",attrs:{sm:"6",md:"6",lg:"5",xl:"4"}},[a("b-form-group",{staticClass:"mb-0",attrs:{label:"แสดงหน้าละ","label-for":"per-page-select","label-cols-sm":"6","label-cols-md":"4","label-cols-lg":"3","label-align-sm":"right","label-size":"sm"}},[a("b-form-select",{attrs:{id:"per-page-select",options:e.pageOptions,size:"sm"},model:{value:e.perPage,callback:function(t){e.perPage=t},expression:"perPage"}})],1)],1),a("b-col",{staticClass:"my-1",attrs:{sm:"6",md:"6"}},[a("b-pagination",{staticClass:"my-0",attrs:{"total-rows":e.totalRows,"per-page":e.perPage,align:"fill",size:"sm"},model:{value:e.currentPage,callback:function(t){e.currentPage=t},expression:"currentPage"}})],1)],1),a("Edit",{attrs:{editModal:e.editModal,items:e.items}}),a("Add",{attrs:{id:e.v_id,Vegetable:e.Vegetable}})],1)],1)},k=[],z=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"Edit"}},[a("b-modal",{attrs:{id:e.editModal.id,title:e.editModal.title,"ok-title":"ตกลง","cancel-title":"ยกเลิก",size:"lg"},on:{ok:e.handleOk}},[a("form",{staticClass:"form-group needs-validation"},[a("div",{staticClass:"row mb-3"},[a("div",{staticClass:"col",staticStyle:{"min-width":"300px"}},[a("div",{staticClass:"input-group"},[a("span",{staticClass:"input-group-text"},[e._v("ชนิดปุ๋ย:")]),a("b-form-input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control",class:{input:!0,"is-invalid":e.errors.has("fertilizer_type")},attrs:{list:"my-list-id",type:"text","aria-label":"fertilizer_type",name:"fertilizer_type"},model:{value:e.editModal.content.fertilizer_type,callback:function(t){e.$set(e.editModal.content,"fertilizer_type",t)},expression:"editModal.content.fertilizer_type"}}),a("datalist",{attrs:{id:"my-list-id"}},e._l(e.sizes,(function(t,i){return a("option",{key:t.fertilizer_type+i},[e._v(e._s(t.fertilizer_type))])})),0),a("span",{staticClass:"invalid-feedback"},[e._v(e._s(e.errors.first("fertilizer_type")))])],1)])]),a("div",{staticClass:"row mb-3"},[a("div",{staticClass:"col",staticStyle:{"min-width":"300px"}},[a("div",{staticClass:"input-group"},[a("span",{staticClass:"input-group-text"},[e._v("จำนวนวัน/ครั้ง:")]),a("input",{directives:[{name:"model",rawName:"v-model.number",value:e.editModal.content.day_times,expression:"editModal.content.day_times",modifiers:{number:!0}},{name:"validate",rawName:"v-validate",value:"required|min_value:0|integer",expression:"'required|min_value:0|integer'"}],staticClass:"form-control",class:{input:!0,"is-invalid":e.errors.has("day_times")},attrs:{type:"number","aria-label":"day_times",name:"day_times",min:"0"},domProps:{value:e.editModal.content.day_times},on:{input:function(t){t.target.composing||e.$set(e.editModal.content,"day_times",e._n(t.target.value))},blur:function(t){return e.$forceUpdate()}}}),a("span",{staticClass:"input-group-text"},[e._v("วัน")]),a("span",{staticClass:"invalid-feedback"},[e._v(e._s(e.errors.first("day_times")))])])])]),a("div",{staticClass:"row mb-3"},[a("div",{staticClass:"col",staticStyle:{"min-width":"300px"}},[a("div",{staticClass:"input-group"},[a("span",{staticClass:"input-group-text"},[e._v("จำนวนวันก่อนใส่ปุ๋ยครั้งแรก:")]),a("input",{directives:[{name:"model",rawName:"v-model.number",value:e.editModal.content.num_first,expression:"editModal.content.num_first",modifiers:{number:!0}},{name:"validate",rawName:"v-validate",value:"required|min_value:0|integer",expression:"'required|min_value:0|integer'"}],staticClass:"form-control",class:{input:!0,"is-invalid":e.errors.has("num_first")},attrs:{type:"number","aria-label":"num_first",name:"num_first",min:"0"},domProps:{value:e.editModal.content.num_first},on:{input:function(t){t.target.composing||e.$set(e.editModal.content,"num_first",e._n(t.target.value))},blur:function(t){return e.$forceUpdate()}}}),a("span",{staticClass:"input-group-text"},[e._v("วัน")]),a("span",{staticClass:"invalid-feedback"},[e._v(e._s(e.errors.first("num_first")))])])]),a("div",{staticClass:"col",staticStyle:{"min-width":"300px"}},[a("div",{staticClass:"input-group"},[a("span",{staticClass:"input-group-text"},[e._v("จำนวนวันหยุดใส่ปุ๋ยก่อนเก็บ:")]),a("input",{directives:[{name:"model",rawName:"v-model.number",value:e.editModal.content.num_pick,expression:"editModal.content.num_pick",modifiers:{number:!0}},{name:"validate",rawName:"v-validate",value:"required|min_value:0|integer",expression:"'required|min_value:0|integer'"}],staticClass:"form-control",class:{input:!0,"is-invalid":e.errors.has("num_pick")},attrs:{type:"number","aria-label":"num_pick",name:"num_pick",min:"0"},domProps:{value:e.editModal.content.num_pick},on:{input:function(t){t.target.composing||e.$set(e.editModal.content,"num_pick",e._n(t.target.value))},blur:function(t){return e.$forceUpdate()}}}),a("span",{staticClass:"input-group-text"},[e._v("วัน")]),a("span",{staticClass:"invalid-feedback"},[e._v(e._s(e.errors.first("num_pick")))])])])]),e._l(e.editModal.content.fertilizer_at,(function(t,i){return a("div",{key:i,staticClass:"row mb-3"},[a("div",{staticClass:"col",staticStyle:{"min-width":"300px"}},[a("div",{staticClass:"input-group"},[a("span",{staticClass:"input-group-text"},[e._v("เวลา:")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.time,expression:"f_at.time"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control",class:{input:!0,"is-invalid":e.errors.has("time")},attrs:{type:"time","aria-label":"time",name:"time",min:"0"},domProps:{value:t.time},on:{input:function(a){a.target.composing||e.$set(t,"time",a.target.value)}}}),a("span",{staticClass:"invalid-feedback"},[e._v(e._s(e.errors.first("time")))])])]),a("div",{staticClass:"col",staticStyle:{"min-width":"300px"}},[a("div",{staticClass:"input-group"},[a("span",{staticClass:"input-group-text"},[e._v("ปริมาณปุ๋ย:")]),a("input",{directives:[{name:"model",rawName:"v-model.number",value:t.fertilizer_amount,expression:"f_at.fertilizer_amount",modifiers:{number:!0}},{name:"validate",rawName:"v-validate",value:"required|min_value:1|integer",expression:"'required|min_value:1|integer'"}],staticClass:"form-control",class:{input:!0,"is-invalid":e.errors.has("fertilizer_amount")},attrs:{type:"number","aria-label":"fertilizer_amount",name:"fertilizer_amount",min:"0"},domProps:{value:t.fertilizer_amount},on:{input:function(a){a.target.composing||e.$set(t,"fertilizer_amount",e._n(a.target.value))},blur:function(t){return e.$forceUpdate()}}}),a("select",{directives:[{name:"model",rawName:"v-model",value:t.unit.unit_id,expression:"f_at.unit.unit_id"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"custom-select input-group-text",class:{input:!0,"is-invalid":e.errors.has("unit_id")},attrs:{name:"unit_id",required:""},on:{change:function(a){var i=Array.prototype.filter.call(a.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(t.unit,"unit_id",a.target.multiple?i:i[0])}}},[a("option",{attrs:{value:"",disabled:"",selected:""}},[e._v("กรุณาเลือก...")]),e._l(e.unit,(function(t){return a("option",{key:t.unit_id,domProps:{value:t.unit_id}},[e._v(" "+e._s(t.unit_eng)+" ("+e._s(t.unit_th)+") ")])}))],2),a("span",{staticClass:"invalid-feedback"},[e._v(e._s(e.errors.first("unit_id")))]),a("span",{staticClass:"invalid-feedback"},[e._v(e._s(e.errors.first("fertilizer_amount")))])])])])}))],2),a("div",{staticClass:"text-center"},[a("b-button",{staticClass:"btn btn-success btn-sm ml-1 mt-1 actions",staticStyle:{height:"35px",width:"80px"},on:{click:function(t){return e.addindex()}}},[e._v(" เพิ่ม ")]),a("b-button",{staticClass:"btn btn-danger btn-sm ml-1 mt-1 actions",staticStyle:{height:"35px",width:"80px"},attrs:{disabled:!(e.editModal.content.fertilizer_at.length>1)},on:{click:function(t){return e.editModal.content.fertilizer_at.pop()}}},[e._v(" ลด ")])],1)])],1)},$=[],M={components:{},props:{editModal:Object},data:function(){return{sizes:[],unit:{}}},mounted:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var a,i,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=localStorage.getItem("accessToken"),t.next=3,a;case 3:if(!t.sent){t.next=21;break}return t.prev=4,t.next=7,l.a.get(e.$apiUrl+"unit",{headers:{Authorization:"bearer ".concat(a)}});case 7:return i=t.sent,t.next=10,l.a.get(e.$apiUrl+"fertilizer",{headers:{Authorization:"bearer ".concat(a)}});case 10:r=t.sent,e.sizes=r.data,e.unit=i.data,t.next=19;break;case 15:t.prev=15,t.t0=t["catch"](4),e.$router.push("/"),localStorage.removeItem("user");case 19:t.next=22;break;case 21:e.$router.push("/");case 22:case"end":return t.stop()}}),t,null,[[4,15]])})))()},methods:{addindex:function(){this.editModal.content.fertilizer_at.push({fertilizer_amount:1,time:"",unit:{unit_id:""}})},handleOk:function(e){e.preventDefault(),this.SaveFertilizer()},SaveFertilizer:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.$validator.validateAll().then(function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(a){var i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!a){t.next=10;break}return i=localStorage.getItem("accessToken"),t.next=4,i;case 4:if(!t.sent){t.next=8;break}try{u()({title:"คุณแน่ใจหรือไม่?",text:"คุณแน่ใจหรือไม่ที่จะอัพเดท?",icon:"warning",buttons:["ยกเลิก","ตกลง"],dangerMode:!0}).then(function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(a){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!a){t.next=7;break}return e.$bvModal.hide(e.editModal.id),t.next=4,l.a.put(e.$apiUrl+"vegetable/evfertilizer/"+e.editModal.v_id,e.editModal.content,{headers:{Authorization:"bearer ".concat(i)}});case 4:u()("อัพเดทเสร็จสิ้น!",{icon:"success",buttons:"ตกลง"}),t.next=8;break;case 7:u()("ยกเลิกแล้ว!",{buttons:"ตกลง"});case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}catch(r){e.$router.push("/"),localStorage.removeItem("username")}t.next=9;break;case 8:e.$router.push("/");case 9:return t.abrupt("return");case 10:u()("ผิดพลาด","กรุณากรอกข้อมูลให้ถูกต้อง!",{icon:"error",button:"ตกลง"});case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 1:case"end":return t.stop()}}),t)})))()}}},S=M,N=Object(p["a"])(S,z,$,!1,null,null,null),q=N.exports,R=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"Add"}},[a("b-modal",{attrs:{id:"AddFertilizer",title:"เพิ่มข้อมูลปุ๋ย","ok-title":"ตกลง","cancel-title":"ยกเลิก",size:"lg"},on:{ok:e.handleOk,show:e.resetData}},[a("form",{staticClass:"form-group needs-validation"},[a("div",{staticClass:"row mb-3"},[a("div",{staticClass:"col",staticStyle:{"min-width":"300px"}},[a("div",{staticClass:"input-group"},[a("span",{staticClass:"input-group-text"},[e._v("ชนิดปุ๋ย:")]),a("b-form-input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control",class:{input:!0,"is-invalid":e.errors.has("fertilizer_type")},attrs:{list:"my-list-id",type:"text","aria-label":"fertilizer_type",name:"fertilizer_type"},model:{value:e.data.fertilizer_type,callback:function(t){e.$set(e.data,"fertilizer_type",t)},expression:"data.fertilizer_type"}}),a("datalist",{attrs:{id:"my-list-id"}},e._l(e.sizes,(function(t,i){return a("option",{key:t.fertilizer_type+i},[e._v(e._s(t.fertilizer_type))])})),0),a("span",{staticClass:"invalid-feedback"},[e._v(e._s(e.errors.first("fertilizer_type")))])],1)])]),a("div",{staticClass:"row mb-3"},[a("div",{staticClass:"col",staticStyle:{"min-width":"300px"}},[a("div",{staticClass:"input-group"},[a("span",{staticClass:"input-group-text"},[e._v("จำนวนวัน/ครั้ง:")]),a("input",{directives:[{name:"model",rawName:"v-model.number",value:e.data.day_times,expression:"data.day_times",modifiers:{number:!0}},{name:"validate",rawName:"v-validate",value:"required|min_value:0|integer",expression:"'required|min_value:0|integer'"}],staticClass:"form-control",class:{input:!0,"is-invalid":e.errors.has("day_times")},attrs:{type:"number","aria-label":"day_times",name:"day_times",min:"0"},domProps:{value:e.data.day_times},on:{input:function(t){t.target.composing||e.$set(e.data,"day_times",e._n(t.target.value))},blur:function(t){return e.$forceUpdate()}}}),a("span",{staticClass:"input-group-text"},[e._v("วัน")]),a("span",{staticClass:"invalid-feedback"},[e._v(e._s(e.errors.first("day_times")))])])])]),a("div",{staticClass:"row mb-3"},[a("div",{staticClass:"col mb-3",staticStyle:{"min-width":"300px"}},[a("div",{staticClass:"input-group"},[a("span",{staticClass:"input-group-text"},[e._v("จำนวนวันก่อนใส่ปุ๋ยครั้งแรก:")]),a("input",{directives:[{name:"model",rawName:"v-model.number",value:e.data.num_first,expression:"data.num_first",modifiers:{number:!0}},{name:"validate",rawName:"v-validate",value:"required|min_value:0|integer",expression:"'required|min_value:0|integer'"}],staticClass:"form-control",class:{input:!0,"is-invalid":e.errors.has("num_first")},attrs:{type:"number","aria-label":"num_first",name:"num_first",min:"0"},domProps:{value:e.data.num_first},on:{input:function(t){t.target.composing||e.$set(e.data,"num_first",e._n(t.target.value))},blur:function(t){return e.$forceUpdate()}}}),a("span",{staticClass:"input-group-text"},[e._v("วัน")]),a("span",{staticClass:"invalid-feedback"},[e._v(e._s(e.errors.first("num_first")))])])]),a("div",{staticClass:"col",staticStyle:{"min-width":"300px"}},[a("div",{staticClass:"input-group"},[a("span",{staticClass:"input-group-text"},[e._v("จำนวนวันหยุดใส่ปุ๋ยก่อนเก็บ:")]),a("input",{directives:[{name:"model",rawName:"v-model.number",value:e.data.num_pick,expression:"data.num_pick",modifiers:{number:!0}},{name:"validate",rawName:"v-validate",value:"required|min_value:0|integer",expression:"'required|min_value:0|integer'"}],staticClass:"form-control",class:{input:!0,"is-invalid":e.errors.has("num_pick")},attrs:{type:"number","aria-label":"num_pick",name:"num_pick",min:"0"},domProps:{value:e.data.num_pick},on:{input:function(t){t.target.composing||e.$set(e.data,"num_pick",e._n(t.target.value))},blur:function(t){return e.$forceUpdate()}}}),a("span",{staticClass:"input-group-text"},[e._v("วัน")]),a("span",{staticClass:"invalid-feedback"},[e._v(e._s(e.errors.first("num_pick")))])])])]),e._l(e.data.fertilizer_at,(function(t,i){return a("div",{key:t.time+i,staticClass:"row mb-3"},[a("div",{staticClass:"col",staticStyle:{"min-width":"300px"}},[a("div",{staticClass:"input-group"},[a("span",{staticClass:"input-group-text"},[e._v("เวลา:")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.time,expression:"f_at.time"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control",class:{input:!0,"is-invalid":e.errors.has("time")},attrs:{type:"time","aria-label":"time",name:"time",min:"0"},domProps:{value:t.time},on:{input:function(a){a.target.composing||e.$set(t,"time",a.target.value)}}}),a("span",{staticClass:"invalid-feedback"},[e._v(e._s(e.errors.first("time")))])])]),a("div",{staticClass:"col",staticStyle:{"min-width":"300px"}},[a("div",{staticClass:"input-group"},[a("span",{staticClass:"input-group-text"},[e._v("ปริมาณปุ๋ย:")]),a("input",{directives:[{name:"model",rawName:"v-model.number",value:t.fertilizer_amount,expression:"f_at.fertilizer_amount",modifiers:{number:!0}},{name:"validate",rawName:"v-validate",value:"required|min_value:1|integer",expression:"'required|min_value:1|integer'"}],staticClass:"form-control",class:{input:!0,"is-invalid":e.errors.has("fertilizer_amount")},attrs:{type:"number","aria-label":"fertilizer_amount",name:"fertilizer_amount",min:"0"},domProps:{value:t.fertilizer_amount},on:{input:function(a){a.target.composing||e.$set(t,"fertilizer_amount",e._n(a.target.value))},blur:function(t){return e.$forceUpdate()}}}),a("select",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"},{name:"model",rawName:"v-model",value:t.unit_id,expression:"f_at.unit_id"}],staticClass:"custom-select input-group-text",class:{input:!0,"is-invalid":e.errors.has("unit_id")},attrs:{name:"unit_id",required:""},on:{change:function(a){var i=Array.prototype.filter.call(a.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(t,"unit_id",a.target.multiple?i:i[0])}}},[a("option",{attrs:{value:"",disabled:"",selected:""}},[e._v("กรุณาเลือก...")]),e._l(e.unit,(function(t){return a("option",{key:t.unit_id,domProps:{value:t.unit_id}},[e._v(" "+e._s(t.unit_eng)+" ("+e._s(t.unit_th)+") ")])}))],2),a("span",{staticClass:"invalid-feedback"},[e._v(e._s(e.errors.first("fertilizer_amount")))]),a("span",{staticClass:"invalid-feedback"},[e._v(e._s(e.errors.first("unit_id")))])])])])}))],2),a("div",{staticClass:"text-center"},[a("b-button",{staticClass:"btn btn-success btn-sm ml-1 mt-1 actions",staticStyle:{height:"35px",width:"80px"},on:{click:function(t){return e.addindex()}}},[e._v(" เพิ่ม ")]),a("b-button",{staticClass:"btn btn-danger btn-sm ml-1 mt-1 actions",staticStyle:{height:"35px",width:"80px"},attrs:{disabled:!(e.data.fertilizer_at.length>1)},on:{click:function(t){e.data.fertilizer_at.length>1&&e.data.fertilizer_at.pop()}}},[e._v(" ลด ")])],1)])],1)},O=[],P={components:{},props:{id:String,Vegetable:Function},data:function(){return{sizes:[],data:{fertilizer_type:"",day_times:1,num_first:1,num_pick:1,fertilizer_at:[{fertilizer_amount:1,time:"",unit_id:""}]},unit:[]}},mounted:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var a,i,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=localStorage.getItem("accessToken"),t.next=3,a;case 3:if(!t.sent){t.next=21;break}return t.prev=4,t.next=7,l.a.get(e.$apiUrl+"unit",{headers:{Authorization:"bearer ".concat(a)}});case 7:return i=t.sent,t.next=10,l.a.get(e.$apiUrl+"fertilizer",{headers:{Authorization:"bearer ".concat(a)}});case 10:r=t.sent,e.sizes=r.data,e.unit=i.data,t.next=19;break;case 15:t.prev=15,t.t0=t["catch"](4),e.$router.push("/"),localStorage.removeItem("user");case 19:t.next=22;break;case 21:e.$router.push("/");case 22:case"end":return t.stop()}}),t,null,[[4,15]])})))()},methods:{addindex:function(){this.data.fertilizer_at.push({fertilizer_amount:1,time:"",unit_id:""})},handleOk:function(e){e.preventDefault(),this.SaveFertilizer()},resetData:function(){this.data={fertilizer_type:"",day_times:1,num_first:1,num_pick:1,fertilizer_at:[{fertilizer_amount:1,time:"",unit_id:""}]}},SaveFertilizer:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.$validator.validateAll().then(function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(a){var i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!a){t.next=19;break}return i=localStorage.getItem("accessToken"),t.next=4,i;case 4:if(!t.sent){t.next=17;break}return t.prev=5,e.$bvModal.hide("AddFertilizer"),t.next=9,l.a.post(e.$apiUrl+"vegetable/vfertilizer/"+e.id,e.data,{headers:{Authorization:"bearer ".concat(i)}}).then((function(t){204==t.status&&(e.Vegetable(),u()("เพิ่มข้อมูลเสร็จสิ้นแล้ว!",{icon:"success",button:"ตกลง"}))}));case 9:t.next=15;break;case 11:t.prev=11,t.t0=t["catch"](5),e.$router.push("/"),localStorage.removeItem("username");case 15:t.next=18;break;case 17:e.$router.push("/");case 18:return t.abrupt("return");case 19:u()("ผิดพลาด","กรุณากรอกข้อมูลให้ถูกต้อง!",{icon:"error",button:"ตกลง"});case 20:case"end":return t.stop()}}),t,null,[[5,11]])})));return function(e){return t.apply(this,arguments)}}());case 1:case"end":return t.stop()}}),t)})))()}}},U=P,A=(a("b9fd"),Object(p["a"])(U,R,O,!1,null,null,null)),j=A.exports,F=a("7bb1"),V={th:{attributes:{fertilizer_type:"ชนิดปุ๋ย",fertilizer_at:"เวลาและปริมาณปุ๋ย",day_times:"จำนวนวัน/ครั้ง",num_first:"จำนวนวันก่อนใส่ปุ๋ยครั้งแรก",num_pick:"จำนวนวันหยุดใส่ปุ๋ยก่อนเก็บ",unit_id:"หน่วย",fertilizer_amount:"ปริมาณปุ๋ย",time:"เวลา"}}};F["a"].localize(V);var I={components:{Edit:q,Add:j},props:{items:Array,v_id:String,Vegetable:Function},metaInfo:{title:"Fertilizer"},data:function(){return{isBusy:!1,fields:[{key:"fertilizer_id",label:"ลำดับ",sortable:!0,sortDirection:"desc"},{key:"fertilizer_type",label:"ชนิดปุ๋ย",sortable:!0,class:"text-center"},{key:"fertilizer_at",label:"เวลาและปริมาณปุ๋ย",sortable:!0,class:"text-center"},{key:"day_times",label:"จำนวนวัน/ครั้ง",sortable:!0,class:"text-center"},{key:"num_first",label:"จำนวนวันก่อนใส่ปุ๋ยครั้งแรก",sortable:!0,class:"text-center"},{key:"num_pick",label:"จำนวนวันหยุดใส่ปุ๋ยก่อนเก็บ",sortable:!0,class:"text-center",sortByFormatted:!0,filterByFormatted:!0},{key:"actions",label:"การดำเนินการ"}],totalRows:1,currentPage:1,perPage:5,pageOptions:[5,10,15,30,50,{value:100,text:"100"}],filter:"",filterOn:[],editModal:{id:"indexf",v_id:"",title:"",content:""}}},mounted:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.editModal.content=e.items[0];case 1:case"end":return t.stop()}}),t)})))()},methods:{Edit:function(e,t,a){this.editModal.v_id=this.v_id,this.editModal.title="แก้ไข : ".concat(e+1),this.editModal.content=a,this.editModal.content.fertilizer_type=a.fertilizer.fertilizer_type,this.$root.$emit("bv::show::modal",this.editModal.id,t)},Delete:function(e){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function a(){var i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,localStorage.getItem("accessToken");case 2:i=a.sent,u()({title:"คุณแน่ใจหรือไม่?",text:"คุณแน่ใจหรือไม่ที่จะลบไอดี : "+(e+1),icon:"warning",buttons:["ยกเลิก","ตกลง"],dangerMode:!0}).then(function(){var a=Object(n["a"])(regeneratorRuntime.mark((function a(r){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(!r){a.next=5;break}return a.next=3,l.a.put(t.$apiUrl+"vegetable/vfertilizer/"+e,{v_id:t.v_id},{headers:{Authorization:"bearer ".concat(i)}}).then((function(){t.Vegetable(),u()("ลบเสร็จสิ้น!",{icon:"success",button:"ตกลง"})}));case 3:a.next=6;break;case 5:u()("ยกเลิกแล้ว!",{icon:"success",button:"ตกลง"});case 6:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}());case 4:case"end":return a.stop()}}),a)})))()}}},D=I,E=(a("94a9"),Object(p["a"])(D,y,k,!1,null,"590353ce",null)),T=E.exports,G={th:{attributes:{v_name:"ชื่อผัก",v_wide:"ระยะปลูก(กว้าง)",v_long:"ระยะปลูก(ยาว)",v_nfv:"น้ำหนัก/ต้น",v_d1:"จำนวนวันที่เพาะ",v_d2:"จำนวนวันที่ปลูก",v_d3:"จำนวนวันที่เก็บ"}}};F["a"].localize(G);var B={components:{Edit:_,Add:w,Fertilizer:T},metaInfo:{title:"Vegetable"},data:function(){return{items:[],isBusy:!0,fields:[{key:"v_id",label:"ลำดับ",sortable:!0,sortDirection:"desc"},{key:"v_photo",label:"รูปภาพ",sortable:!0,class:"text-center"},{key:"v_name",label:"ชื่อผัก",sortable:!0,class:"text-center"},{key:"distance",label:"ระยะปลูก(กว้าง x ยาว)",sortable:!0,class:"text-center"},{key:"v_nfv",label:"น้ำหนัก",sortable:!0,class:"text-center"},{key:"v_d1",label:"จำนวนวันที่เพาะ",sortable:!0,class:"text-center"},{key:"v_d2",label:"จำนวนวันที่ปลูก",sortable:!0,class:"text-center"},{key:"v_d3",label:"จำนวนวันที่เก็บ",sortable:!0,class:"text-center"},{key:"actions",label:"การดำเนินการ"}],totalRows:1,currentPage:1,perPage:5,pageOptions:[5,10,15,30,50,100],filter:"",filterOn:[],editModal:{id:"edit-modal",title:"",content:""}}},mounted:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.Vegetable();case 1:case"end":return t.stop()}}),t)})))()},methods:{Edit:function(e,t,a){this.editModal.title="แก้ไข : ".concat(t),this.editModal.content=e,this.$root.$emit("bv::show::modal",this.editModal.id,a)},Vegetable:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var a,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.$toasts.warning("กำลังโหลดข้อมูลกรุณารอสักครู่"),a=localStorage.getItem("accessToken"),t.next=4,a;case 4:if(!t.sent){t.next=22;break}return t.prev=5,t.next=8,l.a.get(e.$apiUrl+"vegetable",{headers:{Authorization:"bearer ".concat(a)}});case 8:i=t.sent,e.items=i.data,e.editModal.content=i.data[0],e.totalRows=e.items.length,e.isBusy=!1,e.$toasts.success("เรียกข้อมูลเสร็จสิ้น"),t.next=20;break;case 16:t.prev=16,t.t0=t["catch"](5),e.$router.push("/"),localStorage.removeItem("username");case 20:t.next=23;break;case 22:e.$router.push("/");case 23:case"end":return t.stop()}}),t,null,[[5,16]])})))()},Delete:function(e,t){var a=this;return Object(n["a"])(regeneratorRuntime.mark((function i(){var r;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return i.next=2,localStorage.getItem("accessToken");case 2:r=i.sent,u()({title:"คุณแน่ใจหรือไม่?",text:"คุณแน่ใจหรือไม่ที่จะลบ : "+t,icon:"warning",buttons:["ยกเลิก","ตกลง"],dangerMode:!0}).then(function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(i){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!i){t.next=7;break}return t.next=3,l.a.delete(a.$apiUrl+"vegetable/"+e,{headers:{Authorization:"bearer ".concat(r)}});case 3:a.Vegetable(),u()("ลบเสร็จสิ้น!",{icon:"success",button:"ตกลง"}),t.next=8;break;case 7:u()("ยกเลิกแล้ว!",{icon:"success",button:"ตกลง"});case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 4:case"end":return i.stop()}}),i)})))()}}},L=B,J=(a("1415"),Object(p["a"])(L,i,r,!1,null,"690f233b",null));t["default"]=J.exports},1415:function(e,t,a){"use strict";a("b43f")},"4c89":function(e,t,a){},"591c":function(e,t,a){"use strict";a("7300")},7300:function(e,t,a){},"94a9":function(e,t,a){"use strict";a("4c89")},b43f:function(e,t,a){},b9fd:function(e,t,a){"use strict";a("f878")},f878:function(e,t,a){}}]);
//# sourceMappingURL=chunk-50c80ee5.89b42734.js.map