(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-82d6d204"],{"2b74":function(e,t,a){"use strict";a("43ce")},"43ce":function(e,t,a){},"77a9":function(e,t,a){"use strict";a("9249")},"80b8":function(e,t,a){"use strict";a("845c")},"845c":function(e,t,a){},9249:function(e,t,a){},b7f7:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("b-container",{attrs:{fluid:""}},[a("b-row",{attrs:{"align-h":"between"}},[a("b-col",{staticClass:"my-1",attrs:{sm:"9",md:"6",lg:"5",xl:"4"}},[a("b-form-group",{staticClass:"mb-2",attrs:{label:"ค้นหา","label-for":"filter-input","label-cols-sm":"3","label-align-sm":"right","label-size":"sm"}},[a("b-input-group",{attrs:{size:"sm"}},[a("b-form-input",{attrs:{id:"filter-input",type:"search",placeholder:"พิมพ์เพื่อค้นหา"},model:{value:e.filter,callback:function(t){e.filter=t},expression:"filter"}}),a("b-input-group-append",[a("b-button",{attrs:{disabled:!e.filter},on:{click:function(t){e.filter=""}}},[e._v("ล้างการค้นหา")])],1)],1)],1)],1),a("b-col",{staticClass:"my-1",attrs:{sm:"7",md:"5",lg:"4",xl:"5"}},[a("b-form-group",{staticClass:"mb-3",attrs:{label:"ตัวกรอง","label-cols-sm":"3","label-align-sm":"right","label-size":"sm"}},[a("b-form-radio-group",{attrs:{id:"radio-group-2",name:"radio-sub-component"},model:{value:e.filter,callback:function(t){e.filter=t},expression:"filter"}},[a("b-form-radio",{attrs:{value:"final"}},[e._v("พร้อมส่ง")]),a("b-form-radio",{attrs:{value:"progress"}},[e._v("กำลังปลูก")]),a("b-form-radio",{attrs:{value:"problem"}},[e._v("มีปัญหา")]),a("b-form-radio",{attrs:{value:"start"}},[e._v("ไม่เริ่มปลูก")])],1)],1)],1),a("b-col",{staticClass:"my-1 text-right",attrs:{sm:"7",md:"5",lg:"4",xl:"2"}},[a("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.AddVegetable_order",modifiers:{AddVegetable_order:!0}}],staticClass:"btn btn-success btn-sm",staticStyle:{height:"35px",width:"140px"}},[e._v(" เพิ่ม ")])],1)],1),a("b-table",{staticClass:"table table-bordered",attrs:{items:e.items,fields:e.fields,"current-page":e.currentPage,"per-page":e.perPage,filter:e.filter,busy:e.isBusy,"tbody-tr-class":e.rowClass,"sort-by":e.sortBy,"sort-desc":e.sortDesc,stacked:"sm","empty-text":"ไม่มีข้อมูล","empty-filtered-text":"ไม่มีข้อมูล","show-empty":""},on:{"update:sortBy":function(t){e.sortBy=t},"update:sort-by":function(t){e.sortBy=t},"update:sortDesc":function(t){e.sortDesc=t},"update:sort-desc":function(t){e.sortDesc=t}},scopedSlots:e._u([{key:"table-busy",fn:function(){return[a("div",{staticClass:"text-center text-danger my-2"},[a("b-spinner",{staticClass:"align-middle"}),a("strong",[e._v("กำลังโหลด...")])],1)]},proxy:!0},{key:"cell(vegetable)",fn:function(t){return e._l(t.value,(function(t,r){return a("span",{key:r},[e._v(e._s(t.vegetable.v_name)+" "+e._s(t.weight)+" "+e._s(t.unit.unit_th)+" "),a("br")])}))}},{key:"cell(order)",fn:function(t){return[e._v(" "+e._s(null==t.item.order?"มีการลบลูกค้าไปแล้ว":t.value.od_name+" "+t.value.od_lname))]}},{key:"cell(actions)",fn:function(t){return["start"==t.item.status?a("b-button",{directives:[{name:"b-popover",rawName:"v-b-popover.hover.top",value:"ลบ : "+t.item.order_id,expression:"'ลบ : ' + row.item.order_id",modifiers:{hover:!0,top:!0}}],staticClass:"btn btn-danger btn-sm ml-1 mt-1 actions",staticStyle:{height:"35px"},on:{click:function(a){return e.Delete(t.item.order_id)}}},[a("i",{staticClass:"material-icons"},[e._v(" delete_forever ")])]):e._e(),"final"==t.item.status?a("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.QRCode",modifiers:{QRCode:!0}}],staticClass:"btn btn-info btn-sm ml-1 mt-1 actions",staticStyle:{height:"35px",width:"140px"},on:{click:function(a){return e.QR(t.item)}}},[e._v(" QrCode ")]):e._e(),"final"==t.item.status?a("b-button",{directives:[{name:"b-popover",rawName:"v-b-popover.hover.top",value:"ยืนยันการรับผัก",expression:"'ยืนยันการรับผัก'",modifiers:{hover:!0,top:!0}}],staticClass:"btn btn-success btn-sm ml-1 mt-1 actions",staticStyle:{height:"35px"},on:{click:function(a){return e.status(t.item.order_id)}}},[e._v(" ยืนยัน ")]):e._e()]}}])}),a("b-row",{attrs:{"align-h":"between"}},[a("b-col",{staticClass:"my-1",attrs:{sm:"6",md:"6",lg:"5",xl:"4"}},[a("b-form-group",{staticClass:"mb-0",attrs:{label:"แสดงหน้าละ","label-for":"per-page-select","label-cols-sm":"6","label-cols-md":"4","label-cols-lg":"3","label-align-sm":"right","label-size":"sm"}},[a("b-form-select",{attrs:{id:"per-page-select",options:e.pageOptions,size:"sm"},model:{value:e.perPage,callback:function(t){e.perPage=t},expression:"perPage"}})],1)],1),a("b-col",{staticClass:"my-1",attrs:{sm:"6",md:"6"}},[a("b-pagination",{staticClass:"my-0",attrs:{"total-rows":e.totalRows,"per-page":e.perPage,align:"fill",size:"sm"},model:{value:e.currentPage,callback:function(t){e.currentPage=t},expression:"currentPage"}})],1)],1),a("Add",{attrs:{vegetable_order:e.vegetable_order,od_id:e.od_id}}),a("QR",{attrs:{editModal:e.editModal}})],1)],1)},n=[],s=a("1da1"),i=(a("96cf"),a("bc3a")),o=a.n(i),l=a("1940"),c=a.n(l),u=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"Addv"}},[a("b-modal",{attrs:{id:"AddVegetable_order",title:"เพิ่มข้อมูลออเดอร์","ok-title":"ตกลง","cancel-title":"ยกเลิก",size:"lg"},on:{ok:e.handleOk,show:e.resetData}},[a("form",{staticClass:"needs-validation form-group"},[a("div",{staticClass:"row mb-3"},[a("div",{staticClass:"col"},[a("div",{staticClass:"input-group"},[a("span",{staticClass:"input-group-text"},[e._v("ลูกค้า:")]),a("select",{directives:[{name:"model",rawName:"v-model",value:e.data.od_id,expression:"data.od_id"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"custom-select form-control",class:{input:!0,"is-invalid":e.errors.has("order")},attrs:{name:"order",required:""},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(e.data,"od_id",t.target.multiple?a:a[0])}}},[a("option",{attrs:{value:"",disabled:"",selected:""}},[e._v("กรุณาเลือก...")]),e._l(e.order,(function(t){return a("option",{key:t.od_id,domProps:{value:t.od_id}},[e._v(" "+e._s(t.od_name)+" "+e._s(t.od_lname)+" ที่อยู่."+e._s(t.od_address)+" ถนน."+e._s(t.od_road)+" ตำบล."+e._s(t.od_locality)+" อำเภอ."+e._s(t.od_district)+" จังหวัด."+e._s(t.od_province)+" ")])}))],2),a("span",{staticClass:"invalid-feedback"},[e._v(e._s(e.errors.first("order")))])])])]),a("div",{staticClass:"row mb-3"},[a("div",{staticClass:"col"},[a("div",{staticClass:"input-group"},[a("span",{staticClass:"input-group-text"},[e._v("วันรับของ:")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.data.date_final,expression:"data.date_final"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control",class:{input:!0,"is-invalid":e.errors.has("date_final")},attrs:{type:"date",name:"date_final","aria-label":"date_final",min:(new Date).toLocaleDateString("en-CA")},domProps:{value:e.data.date_final},on:{input:function(t){t.target.composing||e.$set(e.data,"date_final",t.target.value)}}}),a("span",{staticClass:"invalid-feedback"},[e._v(e._s(e.errors.first("date_final")))])])])]),e._l(e.data.vegetable,(function(t,r){return a("div",{key:r},[a("div",{staticClass:"row mb-2"},[a("div",{staticClass:"col"},[a("div",{staticClass:"input-group"},[a("span",{staticClass:"input-group-text"},[e._v(e._s(r+1))]),a("select",{directives:[{name:"model",rawName:"v-model",value:t.v_id,expression:"v.v_id"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"custom-select form-control",class:{input:!0,"is-invalid":e.errors.has("v_id")},attrs:{name:"v_id",required:""},on:{change:function(a){var r=Array.prototype.filter.call(a.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(t,"v_id",a.target.multiple?r:r[0])}}},[a("option",{attrs:{value:"",disabled:"",selected:""}},[e._v("กรุณาเลือกผัก")]),e._l(e.vegetable,(function(t){return a("option",{key:t.v_id,domProps:{value:t.v_id}},[e._v(" "+e._s(t.v_name)+" ")])}))],2),a("input",{directives:[{name:"model",rawName:"v-model.number",value:t.weight,expression:"v.weight",modifiers:{number:!0}},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control form-control",class:{input:!0,"is-invalid":e.errors.has("weight")},attrs:{type:"number","aria-label":"weight",name:"weight"},domProps:{value:t.weight},on:{input:function(a){a.target.composing||e.$set(t,"weight",e._n(a.target.value))},blur:function(t){return e.$forceUpdate()}}}),a("select",{directives:[{name:"model",rawName:"v-model",value:t.unit_id,expression:"v.unit_id"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"custom-select form-control",class:{input:!0,"is-invalid":e.errors.has("unit_id")},attrs:{name:"unit_id",required:""},on:{change:function(a){var r=Array.prototype.filter.call(a.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(t,"unit_id",a.target.multiple?r:r[0])}}},[a("option",{attrs:{value:"",disabled:"",selected:""}},[e._v("กรุณาเลือกหน่วย")]),e._l(e.unit,(function(t){return a("option",{key:t.unit_id,domProps:{value:t.unit_id}},[e._v(" "+e._s(t.unit_eng)+" ("+e._s(t.unit_th)+") ")])}))],2)]),a("span",{staticClass:"invalid-feedback"},[e._v(e._s(e.errors.first("v_id")))]),a("span",{staticClass:"invalid-feedback"},[e._v(e._s(e.errors.first("weight")))]),a("span",{staticClass:"invalid-feedback"},[e._v(e._s(e.errors.first("unit_id")))])])])])}))],2)])],1)},d=[],m={components:{},props:{vegetable_order:Function},data:function(){return{data:{},order:[],unit:[],vegetable:[]}},mounted:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var a,r,n,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=localStorage.getItem("accessToken"),t.next=3,a;case 3:if(!t.sent){t.next=25;break}return t.prev=4,t.next=7,o.a.get(e.$apiUrl+"unit",{headers:{Authorization:"bearer ".concat(a)}});case 7:return r=t.sent,t.next=10,o.a.get(e.$apiUrl+"vegetable",{headers:{Authorization:"bearer ".concat(a)}});case 10:return n=t.sent,t.next=13,o.a.get(e.$apiUrl+"order",{headers:{Authorization:"bearer ".concat(a)}});case 13:s=t.sent,e.order=s.data,e.vegetable=n.data,e.unit=r.data,t.next=23;break;case 19:t.prev=19,t.t0=t["catch"](4),e.$router.push("/"),localStorage.removeItem("user");case 23:t.next=26;break;case 25:e.$router.push("/");case 26:case"end":return t.stop()}}),t,null,[[4,19]])})))()},methods:{handleOk:function(e){e.preventDefault(),this.SaveVegetable_order()},resetData:function(){this.data={od_id:"",date_final:"",vegetable:[{unit_id:"",v_id:"",weight:10}]}},addindex:function(){this.data.vegetable.push({unit_id:"",v_id:"",weight:10})},SaveVegetable_order:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.$validator.validateAll().then(function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(a){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!a){t.next=21;break}return r=localStorage.getItem("accessToken"),t.next=4,r;case 4:if(!t.sent){t.next=19;break}return t.prev=5,e.$bvModal.hide("AddVegetable_order"),t.next=9,o.a.post(e.$apiUrl+"addvegetable_order",e.data,{headers:{Authorization:"bearer ".concat(r)}});case 9:e.vegetable_order(),c()("เพิ่มข้อมูลเสร็จสิ้นแล้ว!",{icon:"success",buttons:"ตกลง"}),t.next=17;break;case 13:t.prev=13,t.t0=t["catch"](5),e.$router.push("/"),localStorage.removeItem("username");case 17:t.next=20;break;case 19:e.$router.push("/");case 20:return t.abrupt("return");case 21:c()("ผิดพลาด","กรุณากรอกข้อมูลให้ถูกต้อง!",{icon:"error",button:"ตกลง"});case 22:case"end":return t.stop()}}),t,null,[[5,13]])})));return function(e){return t.apply(this,arguments)}}());case 1:case"end":return t.stop()}}),t)})))()}}},v=m,p=(a("77a9"),a("2877")),b=Object(p["a"])(v,u,d,!1,null,null,null),f=b.exports,g=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"QR_Code"}},[a("b-modal",{attrs:{id:"QRCode",title:"QR Code",size:"sm","hide-footer":""}},[a("form",{staticClass:"needs-validation form-group"},e._l(e.editModal.content.production,(function(t,r){return a("div",{key:r,staticClass:"row"},[a("div",{staticClass:"col"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col text-center"},[a("h5",[e._v(e._s(t.v_name))])])]),a("div",{staticClass:"row"},[a("div",{staticClass:"col text-center"},[a("vue-qr",{attrs:{text:e.$QrUrl+t.pd_id,size:140,margin:0}})],1)]),a("div",{staticClass:"row mt-2"},[a("div",{staticClass:"col text-center"},[a("div",{staticClass:"input-group"},[a("span",{staticClass:"input-group-text"},[e._v("จำนวนแถว:")]),a("input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"},{name:"model",rawName:"v-model.number",value:e.number,expression:"number",modifiers:{number:!0}}],staticClass:"form-control",class:{input:!0,"is-invalid":e.errors.has("number")},attrs:{type:"number","aria-label":"number",name:"number",min:"1"},domProps:{value:e.number},on:{input:function(t){t.target.composing||(e.number=e._n(t.target.value))},blur:function(t){return e.$forceUpdate()}}})])])]),a("div",{staticClass:"row mb-4 mt-2"},[a("div",{staticClass:"col text-center"},[a("button",{staticClass:"btn btn-info",attrs:{type:"button"},on:{click:function(a){return e.generateReport(t.pd_id,t.v_name)}}},[e._v(" พิมพ์ ")])])])])])})),0),a("b-button",{staticClass:"mt-3",attrs:{block:""},on:{click:function(t){return e.$bvModal.hide("QRCode")}}},[e._v("ปิด")])],1),a("div",[e.id?a("vue-html2pdf",{ref:"html2Pdf",attrs:{"show-layout":!1,"float-layout":!0,"enable-download":!1,"preview-modal":!0,"paginate-elements-by-height":1400,filename:e.name,"pdf-quality":2,"manual-pagination":!0,"pdf-format":"a4","pdf-orientation":"portrait","pdf-content-width":"800px"}},[a("section",{attrs:{slot:"pdf-content"},slot:"pdf-content"},e._l(e.number,(function(t){return a("div",{key:t},[a("div",{staticClass:"row"},e._l(4,(function(t){return a("div",{key:t,staticClass:"col m-2 mb-3 text-center"},[a("h6",{staticStyle:{"font-size":"15px",margin:"0"}},[e._v(e._s(e.name))]),a("vue-qr",{attrs:{text:e.$QrUrl+e.id,size:133,margin:0}}),a("h6",{staticStyle:{"font-size":"10px",margin:"0"}},[e._v(e._s(e.id))])],1)})),0)])})),0)]):e._e()],1)],1)},_=[],h=(a("b0c0"),a("6480")),w=a("658f"),x=a.n(w),k={components:{VueQr:x.a,VueHtml2pdf:h["a"]},props:{editModal:Object},data:function(){return{id:"",number:5,name:""}},mounted:function(){return Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},methods:{generateReport:function(e,t){var a=this;this.id=e,this.name=t,setTimeout((function(){return a.$refs.html2Pdf.generatePdf()}),30)}}},C=k,y=(a("80b8"),Object(p["a"])(C,g,_,!1,null,null,null)),R=y.exports,$=a("7bb1"),z={th:{attributes:{vegetable:"ออเดอร์",unit_id:"หน่วย",v_id:"ผัก",weight:"จำนวน",date_final:"วันรับของ",order:"ลูกค้า"}}};$["a"].localize(z);var P={components:{Add:f,QR:R},props:{od_id:String},metaInfo:{title:"Order"},data:function(){return{items:[],isBusy:!0,sortBy:"order_id",fields:[{key:"order_id",label:"หมายเลข",sortable:!0,sortDirection:"desc"},{key:"order",label:"ลูกค้า",sortable:!0,class:"text-center"},{key:"vegetable",label:"ออเดอร์",sortable:!0,class:"text-center"},{key:"date",label:"วันที่ใส่ข้อมูล",sortable:!0,class:"text-center"},{key:"date_final",label:"วันที่รับของ",sortable:!0,class:"text-center"},{key:"actions",label:"การดำเนินการ"}],totalRows:1,currentPage:1,perPage:5,pageOptions:[5,10,15,30,50,{value:100,text:"100"}],sortDesc:!1,filter:"",editModal:{id:"edit-modalv",title:"",content:""}}},mounted:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.vegetable_order();case 1:case"end":return t.stop()}}),t)})))()},methods:{rowClass:function(e,t){if(e&&"row"===t)return"final"===e.status?"table-success":"progress"===e.status?"table-warning":"problem"===e.status?"table-danger":void 0},status:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function a(){var r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return r=localStorage.getItem("accessToken"),a.next=3,r;case 3:if(!a.sent){a.next=7;break}c()({title:"คุณแน่ใจหรือไม่?",text:"",icon:"warning",buttons:["ยกเลิก","ตกลง"],dangerMode:!0}).then(function(){var a=Object(s["a"])(regeneratorRuntime.mark((function a(n){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(!n){a.next=14;break}return a.prev=1,a.next=4,o.a.get(t.$apiUrl+"vegetable_order_status/"+e,{headers:{Authorization:"bearer ".concat(r)}});case 4:t.vegetable_order(),c()("เสร็จสิ้น!",{icon:"success",buttons:"ตกลง"}),a.next=12;break;case 8:a.prev=8,a.t0=a["catch"](1),t.$router.push("/"),localStorage.removeItem("username");case 12:a.next=15;break;case 14:c()("ยกเลิกแล้ว!",{buttons:"ตกลง"});case 15:case"end":return a.stop()}}),a,null,[[1,8]])})));return function(e){return a.apply(this,arguments)}}()),a.next=8;break;case 7:t.$router.push("/");case 8:case"end":return a.stop()}}),a)})))()},vegetable_order:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.$toasts.warning("กำลังโหลดข้อมูลกรุณารอสักครู่"),a=localStorage.getItem("accessToken"),t.next=4,a;case 4:if(!t.sent){t.next=22;break}return t.prev=5,t.next=8,o.a.get(e.$apiUrl+"vegetable_order",{headers:{Authorization:"bearer ".concat(a)}});case 8:r=t.sent,e.items=r.data,e.editModal.content=r.data[0],e.totalRows=e.items.length,e.isBusy=!1,e.$toasts.success("เรียกข้อมูลเสร็จสิ้น"),t.next=20;break;case 16:t.prev=16,t.t0=t["catch"](5),e.$router.push("/"),localStorage.removeItem("username");case 20:t.next=23;break;case 22:e.$router.push("/");case 23:case"end":return t.stop()}}),t,null,[[5,16]])})))()},QR:function(e){this.editModal.content=e},Delete:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function a(){var r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,localStorage.getItem("accessToken");case 2:r=a.sent,c()({title:"คุณแน่ใจหรือไม่?",text:"คุณแน่ใจหรือไม่ที่จะลบไอดี : "+e,icon:"warning",buttons:["ยกเลิก","ตกลง"],dangerMode:!0}).then(function(){var a=Object(s["a"])(regeneratorRuntime.mark((function a(n){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(!n){a.next=7;break}return a.next=3,o.a.delete(t.$apiUrl+"vegetable_order/"+e,{headers:{Authorization:"bearer ".concat(r)}});case 3:t.vegetable_order(),c()("ลบเสร็จสิ้น!",{icon:"success",buttons:"ตกลง"}),a.next=8;break;case 7:c()("ยกเลิกแล้ว!",{buttons:"ตกลง"});case 8:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}());case 4:case"end":return a.stop()}}),a)})))()}}},S=P,A=(a("2b74"),Object(p["a"])(S,r,n,!1,null,"64a2f7a8",null));t["default"]=A.exports}}]);
//# sourceMappingURL=chunk-82d6d204.fea596c6.js.map